metadata:
  template_id: news_email
  group: public
  name: News Email Template
  description: Email template for distributing news stories with heading, story list, and disclaimer

global_parameters:
  - name: email_subject
    type: string
    description: Email subject line
    required: true
  - name: heading_title
    type: string
    description: Main heading title for the email
    required: true
  - name: heading_subtitle
    type: string
    description: Optional subtitle or date range for the email
    required: false
  - name: company_name
    type: string
    description: Company name for disclaimer
    required: true
  - name: recipient_type
    type: string
    description: Type of recipient (e.g., Professional Investors, Institutional Clients)
    required: false
  - name: include_ai_notice
    type: boolean
    description: Whether to include AI-assisted content notice in disclaimer
    required: false
    default: true
  - name: contact_email
    type: string
    description: Contact email for inquiries
    required: false

fragments:
  - fragment_id: news
    group: public
    name: News Story
    description: Financial news story with summary, source, and impact rating
    parameters:
      - name: story_summary
        type: string
        description: Executive summary of the news story
        required: true
      - name: date
        type: string
        description: Publication date
        required: true
      - name: source
        type: string
        description: Source URL or reference
        required: true
      - name: author
        type: string
        description: Author name
        required: true
      - name: impact_rating
        type: string
        description: Impact rating (high, medium, low)
        required: true
  - fragment_id: disclaimer
    group: public
    name: Financial Disclaimer
    description: Legal disclaimer for financial content with optional AI notice
    parameters:
      - name: company_name
        type: string
        description: Name of the financial services company
        required: true
      - name: recipient_type
        type: string
        description: Type of recipient
        required: false
      - name: include_ai_notice
        type: boolean
        description: Whether to include AI-assisted content notice
        required: false
        default: true
      - name: jurisdiction
        type: string
        description: Relevant jurisdiction for legal disclaimers
        required: false
        default: US
      - name: contact_email
        type: string
        description: Contact email for inquiries
        required: false

  - fragment_id: image_from_url
    group: public
    name: Image from URL
    description: Display an image from a URL with optional title and scaling (validated at add time)
    parameters:
      - name: image_url
        type: string
        description: URL of the image (validated for accessibility and content-type)
        required: true
      - name: title
        type: string
        description: Optional title/caption displayed above the image
        required: false
      - name: width
        type: integer
        description: Target width in pixels
        required: false
      - name: height
        type: integer
        description: Target height in pixels
        required: false
      - name: alt_text
        type: string
        description: Alternative text for accessibility
        required: false
      - name: alignment
        type: string
        description: Image alignment (left, center, right)
        required: false
      - name: validated_at
        type: string
        description: Timestamp when URL was validated (injected automatically)
        required: false
      - name: content_type
        type: string
        description: Image content-type from validation (injected automatically)
        required: false
      - name: content_length
        type: integer
        description: Image size in bytes from validation (injected automatically)
        required: false
      - name: require_https
        type: boolean
        description: Whether HTTPS is required (injected automatically)
        required: false
      - name: embedded_data_uri
        type: string
        description: Base64-encoded data URI of downloaded image for HTML/PDF embedding (injected automatically, Markdown uses image_url instead)
        required: false
